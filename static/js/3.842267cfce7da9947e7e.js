webpackJsonp([3],{1294:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(43),i=a.n(n),r=a(875),o=a(86),s=[{text:"一般",icon:"ios-information-circle",color:"#39f",type:"info"},{text:"警告",icon:"ios-alert",color:"#f90",type:"warning"},{text:"错误",icon:"ios-close-circle",color:"#f30",type:"error"}],c=[{text:"今天",value:0},{text:"最近三天",value:1},{text:"自定义",value:-1}],l=["2017-04-06 16:00:00","2017-04-06 17:00:00"],d="YYYY-MM-DD HH:mm:ss",p=["SuperEnvMall.Server","SuperIT.Server"];t.default={mixins:[r.a],data:function(){var e=this;return{activeTopMenu:"home",loading:!0,columns:[{title:"时间",key:"time",sortable:"custom",maxWidth:200,ellipsis:!0},{title:"级别",key:"level",width:80,align:"center",render:function(e,t){var a=s[t.row.level];return e("div",{style:{color:a.color}},[e("Icon",{props:{type:a.icon},style:{fontSize:"14px",marginRight:"5px"}}),e("span",a.text)])}},{title:"主机",key:"ip",maxWidth:200,ellipsis:!0},{title:"消息",key:"message",ellipsis:!0},{title:"操作",key:"action",width:80,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.show(a.index)}}},"查看")])}}],levels:s,types:p,currentPage:1,pageSize:10,currentType:p[0],currentLevel:-1,DATETYPES:c,currentDateType:-1,currentTime:l,searchText:"",sortKey:"time",order:"desc"}},computed:{rows:function(){return this.$store.state.Log.rows},total:function(){return this.$store.state.Log.total},formatCurrentTime:function(){var e=this,t=function(t){return t&&e.$moment(t).format(d)},a=i()(this.currentTime,2),n=a[0],r=a[1];return[t(n),t(r)]}},created:function(){this.getLogs()},watch:{currentType:function(){this.getLogs()},currentLevel:function(){this.getLogs()},searchText:function(){this.getLogs()},currentDateType:function(){var e=l,t=this.$moment().endOf("day").format(d);switch(this.currentDateType){case 0:e=[this.$moment().startOf("day").format(d),t];break;case 1:e=[this.$moment().subtract(2,"days").startOf("day").format(d),t]}this.currentTime=e,this.getLogs()}},methods:{getLogs:function(){var e=this;this.loading=!0,this.$store.dispatch(o.d,{page:{current:this.currentPage,size:this.pageSize},query:{type:this.currentType,level:this.currentLevel,time:this.formatCurrentTime,text:this.searchText},sort:{key:this.sortKey,order:this.order}}).then(function(){e.loading=!1,e.setContentHeight()})},show:function(e){var t=this.rows[e],a=s[t.level];this.$Modal[a.type]({title:"日志详情",content:"时间："+t.time+"<br>主机："+t.ip+"<br>消息："+t.message})},changePage:function(e){this.currentPage=e,this.getLogs()},sortLogs:function(e){var t=e.key,a=e.order;"normal"!==a&&(this.sortKey=t,this.order=a,this.getLogs())}}}},1326:function(e,t,a){t=e.exports=a(839)(!0),t.push([e.i,".search-panel>li[data-v-0fc34674]{padding-bottom:20px;text-align:left;overflow:hidden}.search-panel>li>div[data-v-0fc34674]{display:inline-block;padding-right:15px}.search-panel>li>div>span[data-v-0fc34674]{padding-right:10px}.search-panel>li .search-date-type[data-v-0fc34674]{vertical-align:middle;padding-right:10px}.search-panel>li .search-date[data-v-0fc34674]{display:inline-block}@media (max-width:768px){.search-panel>li[data-v-0fc34674]{padding-bottom:10px}.search-panel>li>div[data-v-0fc34674]{margin-bottom:10px}.search-panel>li .search-date[data-v-0fc34674]{margin-top:10px}}.pager[data-v-0fc34674]{padding:20px 0;text-align:center}.log-type[data-v-0fc34674]{width:212px}.search-date[data-v-0fc34674]{width:300px}.log-level[data-v-0fc34674]{vertical-align:middle}.search-box[data-v-0fc34674]{float:right;width:300px;padding-right:0}@media (max-width:768px){.search-box[data-v-0fc34674]{float:left}}","",{version:3,sources:["D:/Workspace/super-tool/src/views/LogView.vue"],names:[],mappings:"AACA,kCACE,oBAAqB,AACrB,gBAAiB,AACjB,eAAiB,CAClB,AACD,sCACE,qBAAsB,AACtB,kBAAoB,CACrB,AACD,2CACE,kBAAoB,CACrB,AACD,oDACE,sBAAuB,AACvB,kBAAoB,CACrB,AACD,+CACE,oBAAsB,CACvB,AACD,yBACA,kCACI,mBAAqB,CACxB,AACD,sCACI,kBAAoB,CACvB,AACD,+CACI,eAAiB,CACpB,CACA,AACD,wBACE,eAAgB,AAChB,iBAAmB,CACpB,AACD,2BACE,WAAa,CACd,AACD,8BACE,WAAa,CACd,AACD,4BACE,qBAAuB,CACxB,AACD,6BACE,YAAa,AACb,YAAa,AACb,eAAiB,CAClB,AACD,yBACA,6BACI,UAAY,CACf,CACA",file:"LogView.vue",sourcesContent:["\n.search-panel > li[data-v-0fc34674] {\n  padding-bottom: 20px;\n  text-align: left;\n  overflow: hidden;\n}\n.search-panel > li > div[data-v-0fc34674] {\n  display: inline-block;\n  padding-right: 15px;\n}\n.search-panel > li > div > span[data-v-0fc34674] {\n  padding-right: 10px;\n}\n.search-panel > li .search-date-type[data-v-0fc34674] {\n  vertical-align: middle;\n  padding-right: 10px;\n}\n.search-panel > li .search-date[data-v-0fc34674] {\n  display: inline-block;\n}\n@media (max-width: 768px) {\n.search-panel > li[data-v-0fc34674] {\n    padding-bottom: 10px;\n}\n.search-panel > li > div[data-v-0fc34674] {\n    margin-bottom: 10px;\n}\n.search-panel > li .search-date[data-v-0fc34674] {\n    margin-top: 10px;\n}\n}\n.pager[data-v-0fc34674] {\n  padding: 20px 0;\n  text-align: center;\n}\n.log-type[data-v-0fc34674] {\n  width: 212px;\n}\n.search-date[data-v-0fc34674] {\n  width: 300px;\n}\n.log-level[data-v-0fc34674] {\n  vertical-align: middle;\n}\n.search-box[data-v-0fc34674] {\n  float: right;\n  width: 300px;\n  padding-right: 0;\n}\n@media (max-width: 768px) {\n.search-box[data-v-0fc34674] {\n    float: left;\n}\n}\n"],sourceRoot:""}])},1625:function(e,t,a){var n=a(1326);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(840)("4aff0138",n,!0)},2030:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"search-panel"},[a("li",[a("div",[a("span",[e._v("类别")]),e._v(" "),a("Select",{staticClass:"log-type",model:{value:e.currentType,callback:function(t){e.currentType=t},expression:"currentType"}},e._l(e.types,function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}),1)],1),e._v(" "),a("div",[a("span",[e._v("级别")]),e._v(" "),a("RadioGroup",{staticClass:"log-level",attrs:{type:"button"},model:{value:e.currentLevel,callback:function(t){e.currentLevel=t},expression:"currentLevel"}},[a("Radio",{attrs:{label:-1}},[e._v("全部")]),e._v(" "),e._l(e.levels,function(t,n){return a("Radio",{key:n,attrs:{label:n}},[e._v(e._s(t.text))])})],2)],1),e._v(" "),a("div",{staticClass:"search-box"},[a("Input",{attrs:{icon:"ios-search",placeholder:"请输入日志信息..."},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)]),e._v(" "),a("li",[a("div",[a("span",[e._v("时间")]),e._v(" "),a("RadioGroup",{staticClass:"search-date-type",attrs:{type:"button"},model:{value:e.currentDateType,callback:function(t){e.currentDateType=t},expression:"currentDateType"}},e._l(e.DATETYPES,function(t){return a("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])}),1),e._v(" "),a("DatePicker",{staticClass:"search-date",attrs:{type:"datetimerange",placeholder:"选择日期和时间",editable:!1},on:{"on-change":e.getLogs,"on-open-change":function(t){e.currentDateType=-1}},model:{value:e.currentTime,callback:function(t){e.currentTime=t},expression:"currentTime"}})],1)])]),e._v(" "),a("Table",{attrs:{border:"",loading:e.loading,columns:e.columns,data:e.rows},on:{"on-sort-change":e.sortLogs}}),e._v(" "),a("Page",{staticClass:"pager",attrs:{total:e.total,current:e.currentPage,"page-size":e.pageSize,"show-elevator":"","show-total":""},on:{"on-change":e.changePage}})],1)},staticRenderFns:[]}},845:function(e,t,a){a(1625);var n=a(2)(a(1294),a(2030),"data-v-0fc34674",null);e.exports=n.exports},875:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(86),i={data:function(){return{activeTopMenu:this.$route.name,activeLeftMenu:this.$route.name,curPageName:this.$route.name}},created:function(){this.setCommon()},mounted:function(){var e=this;this.setContentHeight();var t=void 0;window.onresize=function(){t&&clearTimeout(t),t=setTimeout(function(){e.setContentHeight(),e.resize&&e.resize()},100)}},methods:{setCommon:function(){this.$store.commit(n.a,this.$data),document.title=this.$store.getters.curPageTitle+" - SuperTool"},setContentHeight:function(){var e=function(e){return document.getElementsByClassName(e)},t=document.documentElement.clientHeight-e("layout-header")[0].clientHeight-e("layout-footer")[0].clientHeight-32,a=e("layout-content-main")[0].clientHeight,n=Math.max(t,a)+"px";e("layout-content")[0].style.minHeight=n,e("left-menu")[0].style.minHeight=n}}}}});
//# sourceMappingURL=3.842267cfce7da9947e7e.js.map