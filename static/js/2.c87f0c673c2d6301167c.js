webpackJsonp([2],{1008:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(61),r=n.n(a),i=n(850),o=n(105),s=[{text:"一般",icon:"information-circled",color:"#39f",type:"info"},{text:"警告",icon:"android-alert",color:"#f90",type:"warning"},{text:"错误",icon:"close-circled",color:"#f30",type:"error"}],c=[{text:"今天",value:0},{text:"最近三天",value:1},{text:"自定义",value:-1}],l=["SuperEnvMall.Server","SuperIT.Server"];t.default={mixins:[i.a],data:function(){var e=this;return{activeTopMenu:"home",openLeftMenus:["operations"],columns:[{title:"时间",key:"time",sortable:"custom"},{title:"级别",key:"level",render:function(e,t){var n=s[t.row.level];return e("div",{style:{color:n.color}},[e("Icon",{props:{type:n.icon},style:{fontSize:"14px",marginRight:"5px"}}),e("span",n.text)])}},{title:"主机",key:"ip"},{title:"消息",key:"message",ellipsis:!0},{title:"操作",key:"action",width:100,align:"center",render:function(t,n){return t("div",[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.show(n.index)}}},"查看")])}}],levels:s,types:l,currentPage:1,pageSize:10,currentType:l[0],currentLevel:-1,DATETYPES:c,currentDateType:-1,currentTime:["2017-04-06 16:00:00","2017-04-06 17:00:00"],searchText:"",sortKey:"time",order:"desc"}},computed:{rows:function(){return this.$store.state.Log.rows},total:function(){return this.$store.state.Log.total}},created:function(){this.getLogs()},watch:{currentType:function(){this.getLogs()},currentLevel:function(){this.getLogs()},currentTime:function(){this.getLogs()},searchText:function(){this.getLogs()},currentDateType:function(){var e=r()(this.currentTime,2),t=e[0],n=e[1],a="YYYY-MM-DD HH:mm:ss",i=this.$moment().endOf("day").format(a);switch(this.currentDateType){case 0:n=i,t=this.$moment().startOf("day").format(a);break;case 1:n=i,t=this.$moment().subtract(2,"days").startOf("day").format(a)}this.currentTime=[t,n]}},methods:{getLogs:function(){var e=this;this.$store.dispatch(o.c,{page:{current:this.currentPage,size:this.pageSize},query:{type:this.currentType,level:this.currentLevel,time:this.currentTime,text:this.searchText},sort:{key:this.sortKey,order:this.order}}).then(function(){e.setContentHeight()})},show:function(e){var t=this.rows[e],n=s[t.level];this.$Modal[n.type]({title:"日志详情",content:"时间："+t.time+"<br>主机："+t.ip+"<br>消息："+t.message})},changePage:function(e){this.currentPage=e,this.getLogs()},sortLogs:function(e){var t=e.key,n=e.order;this.sortKey=t,this.order=n,this.getLogs()}}}},1010:function(e,t,n){t=e.exports=n(813)(!0),t.push([e.i,".search-panel>li[data-v-0fc34674]{padding-bottom:20px;text-align:left;overflow:hidden}.search-panel>li>div[data-v-0fc34674]{display:inline-block;padding-right:15px}.search-panel>li>div>span[data-v-0fc34674]{padding-right:10px}.search-panel>li .search-date-type[data-v-0fc34674]{vertical-align:middle;padding-right:10px}.search-panel>li .search-date[data-v-0fc34674]{display:inline-block}.pager[data-v-0fc34674]{padding:20px 0;text-align:center}.log-type[data-v-0fc34674]{width:212px}.search-date[data-v-0fc34674]{width:300px}.log-level[data-v-0fc34674]{vertical-align:middle}.search-box[data-v-0fc34674]{float:right;width:300px;padding-right:0}","",{version:3,sources:["F:/WorkSpace/super-tool/src/views/LogView.vue"],names:[],mappings:"AACA,kCACE,oBAAqB,AACrB,gBAAiB,AACjB,eAAiB,CAClB,AACD,sCACE,qBAAsB,AACtB,kBAAoB,CACrB,AACD,2CACE,kBAAoB,CACrB,AACD,oDACE,sBAAuB,AACvB,kBAAoB,CACrB,AACD,+CACE,oBAAsB,CACvB,AACD,wBACE,eAAgB,AAChB,iBAAmB,CACpB,AACD,2BACE,WAAa,CACd,AACD,8BACE,WAAa,CACd,AACD,4BACE,qBAAuB,CACxB,AACD,6BACE,YAAa,AACb,YAAa,AACb,eAAiB,CAClB",file:"LogView.vue",sourcesContent:["\n.search-panel > li[data-v-0fc34674] {\n  padding-bottom: 20px;\n  text-align: left;\n  overflow: hidden;\n}\n.search-panel > li > div[data-v-0fc34674] {\n  display: inline-block;\n  padding-right: 15px;\n}\n.search-panel > li > div > span[data-v-0fc34674] {\n  padding-right: 10px;\n}\n.search-panel > li .search-date-type[data-v-0fc34674] {\n  vertical-align: middle;\n  padding-right: 10px;\n}\n.search-panel > li .search-date[data-v-0fc34674] {\n  display: inline-block;\n}\n.pager[data-v-0fc34674] {\n  padding: 20px 0;\n  text-align: center;\n}\n.log-type[data-v-0fc34674] {\n  width: 212px;\n}\n.search-date[data-v-0fc34674] {\n  width: 300px;\n}\n.log-level[data-v-0fc34674] {\n  vertical-align: middle;\n}\n.search-box[data-v-0fc34674] {\n  float: right;\n  width: 300px;\n  padding-right: 0;\n}\n"],sourceRoot:""}])},1274:function(e,t,n){var a=n(1010);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(814)("4aff0138",a,!0)},1280:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{staticClass:"search-panel"},[n("li",[n("div",[n("span",[e._v("类别")]),e._v(" "),n("Select",{staticClass:"log-type",model:{value:e.currentType,callback:function(t){e.currentType=t},expression:"currentType"}},e._l(e.types,function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],1),e._v(" "),n("div",[n("span",[e._v("级别")]),e._v(" "),n("RadioGroup",{staticClass:"log-level",attrs:{type:"button"},model:{value:e.currentLevel,callback:function(t){e.currentLevel=t},expression:"currentLevel"}},[n("Radio",{attrs:{label:-1}},[e._v("全部")]),e._v(" "),e._l(e.levels,function(t,a){return n("Radio",{key:a,attrs:{label:a}},[e._v(e._s(t.text))])})],2)],1),e._v(" "),n("div",{staticClass:"search-box"},[n("Input",{attrs:{icon:"ios-search",placeholder:"请输入日志信息..."},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)]),e._v(" "),n("li",[n("div",[n("span",[e._v("时间")]),e._v(" "),n("RadioGroup",{staticClass:"search-date-type",attrs:{type:"button"},model:{value:e.currentDateType,callback:function(t){e.currentDateType=t},expression:"currentDateType"}},e._l(e.DATETYPES,function(t){return n("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),e._v(" "),n("DatePicker",{staticClass:"search-date",attrs:{type:"datetimerange",placeholder:"选择日期和时间",editable:!1},on:{"on-open-change":function(t){e.currentDateType=-1}},model:{value:e.currentTime,callback:function(t){e.currentTime=t},expression:"currentTime"}})],1)])]),e._v(" "),n("Table",{attrs:{border:"",columns:e.columns,data:e.rows},on:{"on-sort-change":e.sortLogs}}),e._v(" "),n("Page",{staticClass:"pager",attrs:{total:e.total,current:e.currentPage,"page-size":e.pageSize,"show-elevator":"","show-total":""},on:{"on-change":e.changePage}})],1)},staticRenderFns:[]}},817:function(e,t,n){n(1274);var a=n(2)(n(1008),n(1280),"data-v-0fc34674",null);e.exports=a.exports},850:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(60),r=n.n(a),i=n(105),o={data:function(){return{activeTopMenu:this.$route.name,activeLeftMenu:this.$route.name,openLeftMenus:[],curPageName:this.$route.name}},created:function(){this.setCommon()},mounted:function(){var e=this;this.setContentHeight();var t=void 0;window.onresize=function(){t&&clearTimeout(t),t=setTimeout(function(){e.setContentHeight();var t=e.$refs;r()(t).forEach(function(e){var n=t[e];n&&n.resize()})},100)}},methods:{setCommon:function(){this.$store.commit(i.a,this.$data),document.title=this.$store.getters.curPageTitle+" - SuperTool"},setContentHeight:function(){var e=function(e){return document.getElementsByClassName(e)},t=document.documentElement.clientHeight-e("layout-header")[0].clientHeight-e("layout-footer")[0].clientHeight-32,n=e("layout-content-main")[0].clientHeight,a=Math.max(t,n)+"px";e("layout-content")[0].style.minHeight=a,e("left-menu")[0].style.minHeight=a}}}}});
//# sourceMappingURL=2.c87f0c673c2d6301167c.js.map